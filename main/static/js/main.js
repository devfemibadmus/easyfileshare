function loadUserFiles(){$.ajax({type:"GET",url:"/get_user_files/",success:function(e){console.log("User files:",e.files),updateFileList(e.files)},error:function(){alert("Error fetching user files.")}})}function updateFileList(e){var o=$("#file-list");if(o.empty(),e.length>0){var l=$("<ol reversed></ol>");e.reverse().forEach(function(o,i){var n=e.length-i,s=`\n                         <li id="${o.file_name}Container">\n                             <div class="filename">${n}. ${o.file_name}</div>\n                             <div class="btns">\n                                 <div class="tooltip">\n                                     <button onclick="copyLink('${o.shareable_link}', '${o.file_name}')" onmouseout="outFunc('${o.file_name}')">\n                                         <span class="tooltiptext" id="${o.file_name}tooltip">Copy to clipboard</span>\n                                         Copy link\n                                     </button>\n                                 </div>\n                                 <button class="delete" onclick="Delete('${o.shareable_link}', '${o.file_name}')">Delete</button>\n                             </div>\n                         </li>`;l.append(s)}),o.append(l)}else o.text("No files found.")}function uploadFile(){var e=new FormData;e.append("file",$("#file-input")[0].files[0]),e.append("csrfmiddlewaretoken",$("[name=csrfmiddlewaretoken]").val()),displayMessage("Uploading...",""),$.ajax({type:"POST",url:"/file_upload/",data:e,processData:!1,contentType:!1,success:function(e){$("#file-input").val(""),console.log("File uploaded successfully"),displayMessage(e.message,e.success)},error:function(e,o,l){console.error("Error uploading file:",l),displayMessage("Error uploading file.",!1)}})}function Delete(e,o){confirm("Are you sure you want to delete this file?")&&$.ajax({type:"POST",url:"/file_delete/"+e+"/",data:{csrfmiddlewaretoken:$("[name=csrfmiddlewaretoken]").val()},success:function(e){console.log("File deleted successfully"),$("#"+o+"Container").empty(),displayMessage(e.message,e.success)},error:function(e,o,l){console.error("Error deleting file:",l),displayMessage("Error deleting file.",!1)}})}function displayMessage(e,o){var l=$("#message-container");l.text(e),""==o||(1!=o?(l.css("color","red"),loadUserFiles()):(l.css("color","green"),loadUserFiles())),"Uploading..."===e||setTimeout(function(){l.empty().removeAttr("style")},2e3)}function copyLink(e,o){navigator.clipboard.writeText(window.location.href+"download/"+e),document.getElementById(o+"tooltip").innerHTML="Copied!"}function outFunc(e){document.getElementById(e+"tooltip").innerHTML="Copy to clipboard"}function checkCookies(){localStorage.getItem("hasAcceptedCookies")||(alert("We use cookies for a better user experience. Visit github.com/devfemibadmus/easyfileshare to learn more."),localStorage.setItem("hasAcceptedCookies",!0))}checkCookies(),loadUserFiles();